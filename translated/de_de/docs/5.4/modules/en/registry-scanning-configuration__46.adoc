= Konfiguration des Registrierungs-Scans
:revdate: 2025-06-25
:page-revdate: {revdate}
:page-opendocs-origin: /06.scanning/02.registry/02.registry.md
:page-opendocs-slug:  /scanning/registry

Das Scannen der Registrierung erfordert, dass der {product-name} Allinone- oder Controller-Container auf einem Host/Knoten bereitgestellt wird. Bitte lesen Sie den Abschnitt xref:installation.adoc[Installation/Deployment], um zu erfahren, wie Sie die {product-name} Container einsetzen. Konfigurieren Sie das Scannen der Registrierung über die Konsole {product-name}, nachdem Sie sich beim Manager angemeldet haben.

Vergewissern Sie sich außerdem, dass ein {product-name} Scanner-Container installiert und so konfiguriert ist, dass er sich mit dem Allinone oder Controller verbindet. Ab Version 4.0 muss der neuvector/scanner-Container getrennt vom allinone oder Controller bereitgestellt werden.

[NOTE]
====
Das Scannen des Registerbildes wird vom Scanner durchgeführt, und das Bild wird in den Speicher gezogen und erweitert. Wenn eine Bildgröße von mehr als 500 MB erwartet wird, sollten Sie den Speicher des Scanners auf 1,5 GB oder mehr erweitern, um mehr Kapazität und Spielraum für den Scanner zu schaffen.
====

Um die Leistung und Skalierbarkeit der Registry-Scans zu erhöhen, können mehrere Scanner-Pods auf verschiedenen Knoten eingesetzt werden, um die Scanaufgaben auf mehrere Scanner zu verteilen. Weitere Informationen finden Sie im Abschnitt xref:scanners.adoc[Mehrere parallele Scanner].

In Umgebungen mit mehreren Clustern (Verbund) kann der primäre (Master-)Cluster eine Registrierung/Repository scannen, die als Verbundregistrierung ausgewiesen ist. Die Scanergebnisse aus diesen Registern werden mit allen verwalteten (entfernten) Clustern synchronisiert. Dies ermöglicht die Anzeige der Scan-Ergebnisse in der Konsole des verwalteten Clusters sowie die Verwendung der Ergebnisse in den Regeln für die Zugangskontrolle des verwalteten Clusters. Die Register müssen nur einmal gescannt werden, anstatt von jedem Cluster, was die CPU/Speicher- und Netzwerkbandbreitennutzung reduziert. Weitere Informationen finden Sie im Abschnitt xref:multicluster.adoc[Multicluster].

== Registry-Scans konfigurieren

Um Registrierungen und Repositorys für die Überprüfung zu konfigurieren, gehen Sie in der Konsole {product-name} zum Menü Assets -> Registries. Hinzufügen oder Bearbeiten von zu scannenden Registern. Verwenden Sie den Filter, um Repositories oder Teilmengen von Bildern zu definieren, die gescannt werden sollen. Wenn Ihre Registrierung den Zugriff über einen Proxy erfordert, kann dies unter Einstellungen -> Konfiguration konfiguriert werden.

image:registry-scan.png[Registry]

Die Registry wird nach einem konfigurierbaren Zeitplan gescannt. Standardmäßig werden nur neue oder aktualisierte Bilder gescannt. Wenn Sie alle zutreffenden Images erneut scannen möchten, wenn die CVE-Datenbank aktualisiert wird, wählen Sie bei der Konfiguration der Registrierung die Schaltfläche Rescan After CVE DB Update. Sie können auch einen Ebenenscan auswählen, um die Schwachstellen für jede Ebene des Bildes anzuzeigen (Hinweis: Ebenenscans können länger dauern und mehr Ressourcen verbrauchen).

Nach Abschluss des Scans werden die Ergebnisse darunter angezeigt. Klicken Sie auf das Repository/Tag, um Schwachstellen zu sehen, und klicken Sie auf die Schwachstelle, um weitere Informationen zu erhalten. Sie können den Bericht auch in einer CSV-Datei herunterladen oder die Ergebnisse in den Ereignisprotokollen einsehen.

image:image_scan_4.png[Geschichtet]

NeuVector bietet eine Option **"Alle gescannten Bilder anzeigen"**. Die Benutzer müssen nicht in ein Register schauen, um ein bestimmtes Bild zu sehen. Stattdessen können die Benutzer auf die letzte Zeile klicken, um alle gescannten Bilder aufzulisten.

image:view-all-scanned-images.png[Registry]

Die Benutzer können auch auf die **Registerseite** gelangen und bestimmte Bilder über den Hyperlink auf der **Containerseite** öffnen. Wenn der Bildname nicht anklickbar ist, bedeutet dies, dass das Bild noch nicht gescannt worden ist.

image:link-to-image-scan-result.png[Container]

Die Scan-Ergebnisse enthalten Schwachstellen nach Image-Ebene, wenn diese Option bei der Konfiguration der Registrierung/des Repositorys ausgewählt wurde, sowie die Ergebnisse der Konformitätsprüfungen. Klicken Sie auf die Registerkarte "Konformität", wenn Sie die Scanergebnisse für ein Bild anzeigen, um die Konformitätsprüfungen zu sehen.

Beim Scannen werden auch alle Module (d. h. ein Inventar) im Bild entdeckt und aufgelistet, wie unten dargestellt. Außerdem wird das Risiko von Sicherheitslücken nach Modulen zusammengefasst und alle Sicherheitslücken für jedes Modul aufgelistet.

image:Image_Modules.png[Module]

Das Scannen wird für Images auf öffentlichen und privaten Docker-Registries unterstützt, die auf Native Docker, Amazon ECR, Redhat/Openshift, jFrog, Microsoft ACR, Sonatype Nexus, Harbor, Google Cloud und anderen Registries basieren.  Der Scan-Bericht für das Image enthält den Sicherheitsstatus verschiedener Pakete und Binärdateien im Image. Die kurze Zusammenfassung des Scan-Berichts kann per Webhook über die Konfiguration der Antwortregeln in der Richtlinie -> Antwortregeln oder per Syslog durch Konfiguration eines Syslog-Servers in den Einstellungen -> Konfiguration gesendet werden. Die Ergebnisse können auch in den Ereignisprotokollen eingesehen werden.

Mindestens ein Repository-Filter ist erforderlich (kann nicht leer gelassen werden).

=== Beispiele für Repository-Filter

image:1-filter-examples.png[filtert]

[NOTE]
====
. Um alle Bild-Tags zu scannen, fügen Sie den Filter als &#42; oder &#42;:&#42; hinzu. Dies funktioniert bei allen Registry-Typen außer der öffentlichen Docker-Registry.
. Repository sollte der vollständige Name sein, wenn Organisation für die öffentliche Docker-Registry gleich Null ist, oder fügen Sie die Bibliothek vor dem Repository wie oben angegeben ein.
. Erstellen Sie ein virtuelles Repository und fügen Sie alle lokalen Repositories hinzu, um alle Tags in einer JFrog-Registry mit der Subdomain-Docker-Zugriffsmethode zu scannen.
. Reguläre Ausdrücke können in einem Filter verwendet werden. Zum Beispiel wird alpine:3.[8|9].* alle 3.8.x und 3.9.x Images und Tags auf Docker Hub scannen.
====

=== Optionen zum Scannen der Registrierung

* Ebenen scannen:
** Liefert das Ergebnis des Schwachstellen-Scans für jede Bildebene separat
** Liefert Informationen über ausgeführte Befehle und hinzugefügte Pakete in der Ebene
** Bildgröße der einzelnen Ebenen
* Automatischer Scan:
** Auto Scan wird nur mit OpenShift imagestream Integration unterstützt. Die korrekte Rollenbindung sollte im Voraus konfiguriert werden.
** Wenn der automatische Scan aktiviert ist, wird der Image-Scan geplant, sobald ein Image in die Registry übertragen wird.
* Regelmäßiger Scan:
** Regelmäßiger Scan aktivieren, um regelmäßig zu scannen
** Das Suchintervall kann zwischen 5 Minuten und alle 7 Tage eingestellt werden.
** Da viele Überprüfungen der Zugangskontrolle von den Ergebnissen der Bildüberprüfung abhängen, trägt die Aktivierung der regelmäßigen Überprüfung dazu bei, dass die Zugangskontrolle über aktuelle Informationen zu den Bildern verfügt.
** Beachten Sie, dass {product-name} Bilder in einer Registrierung scannt, die gegenüber dem letzten Scan neu sind/geändert wurden.
* Nach CVE-DB-Aktualisierung neu scannen
** Aktivieren Sie diese Option, um alle Bilder nach der Aktualisierung der Schwachstellendatenbank erneut zu scannen.

=== Proxyserver für die Registrierung konfigurieren

Bitte gehen Sie zu Einstellungen -> Konfiguration, um die Proxy-Einstellungen für das Scannen der Registrierung zu konfigurieren.

=== Native Docker-Registrierung (auch Quay und Harbor)

==== Native Docker-Registrierung hinzufügen

* Wählen Sie Docker-Registry als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Registrierungs-URL mit Port eingeben
* Geben Sie Benutzernamen und Passwort an, falls dies von der Registrierung verlangt wird
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository kann Platzhalter mit Anfangszeichenfolge haben
** Beispiel neuvector/all&#42;:2&#42;

Hinzufügen einer privaten Docker-Registrierung mit Benutzername/Passwort, aktivierten Scanebenen, aktivierter periodischer Scan alle 30 Minuten und * als Filter zum Scannen aller Tags aus allen Repositories.

image:2-dockerprivate.png[Docker]

Hinzufügen der öffentlichen Docker-Registry zum Scannen ohne Benutzername/Passwort und 2 Repositories mit Wildcard, aktivierten Scanebenen und aktiviertem periodischen Scan.

image:3-dockerpublic.png[docker3]

Hinzufügen der öffentlichen Docker-Registry zum Scannen mit Benutzername/Passwort, Wildcard-Repository, aktivierten Scanebenen und aktiviertem periodischen Scan.

image:4-dockerpub-wild.png[docker4]

[NOTE]
.Kairegister
====
* Geben Sie die Top-Level-URL für Ihre Quay-Registrierung ein; geben Sie keine Verzeichnisse in den Pfad ein.
* Sie müssen ein verschlüsseltes Kennwort auf Ihrem Quay-Server/Konto erstellen und diese Anmeldedaten hier verwenden.  Dann werden die Filter wie oben beschrieben eingesetzt.

image:https://user-images.githubusercontent.com/13239496/218163999-9b281bd9-d049-49f6-85cd-395d7c20c481.png[4 1-quay]
====

==== Starten Sie das Scannen der Docker-Registrierung

* Zu überprüfende Registrierung auswählen
* Klicken Sie zum Scannen auf die Schaltfläche Start
* Warten, bis der Status von Scanning auf Idle wechselt
** Die Scanzeit hängt von der Größe des Repositorys ab

image:5-scandocker.png[Scandocker]

==== Anzeigen des Scanergebnisses

* Klicken Sie auf ein Bild im Bildfenster, um das Scanergebnis für das Bild anzuzeigen.
* Rufen Sie das Scan-Ergebnis auf, um den Sicherheitsstatus des Bildes zu ermitteln.
* Klicken Sie auf die Schaltfläche "Download", um das Scan-Ergebnis des Bildes bei Bedarf herunterzuladen.
* Bewegen Sie die Maus zwischen CVE-Details und Bildern, um zur Zusammenfassung zurückzukehren

Anzeige der gescannten Bilder für die ausgewählte Registrierung

image:6-imagescan.png[gescannt]

Beispiel für das Ergebnis eines Ebenenscans eines Bildes, das die Schwachstellen jeder Ebene, die Größe der Ebene und die auf jeder Ebene ausgeführten Befehle anzeigt. Darüber hinaus gibt es eine Registerkarte "Konformität", die die Ergebnisse der Konformitätsprüfung für das Bild anzeigt.

image:image_scan_4.png[geschichtet]

=== Amazon ECR-Register

Ref:  https://docs.aws.amazon.com/AmazonECR/latest/userguide/Registries.html

==== Amazon ECR-Register hinzufügen

* Wählen Sie Amazon-Registrierung als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Die URL der Registrierung wird automatisch mit anderen Informationen gefunden
* Geben Sie die folgenden Informationen für das Register an. Siehe oben amazon Link zu erhalten unten Informationen
** Registry id
** Region
** Zugangsschlüssel id
** Geheimer Zugangsschlüssel
* Repository als Filter in folgendem Format hinzufügen
** Organisation/Repository:tag
** Repository kann Platzhalter mit Anfangszeichenfolge haben
** Beispiel neuvector/all&#42;:2&#42;
** Organisation kann leer sein, wenn ein solches Bild in der Registrierung vorhanden ist
** &#42; um alle Bild-Tags zu scannen

image:9-aws.png[aws]

=== Redhat-Registrierung

Ref:  https://access.redhat.com/containers

==== Red Hat-Registrierung hinzufügen

* Wählen Sie als Typ Redhat-Registrierung
* Vergabe eines eindeutigen Namens für die Registrierung
* Registrierungs-URL eingeben https://registry.connect.redhat.com/
* Geben Sie den Benutzernamen und das Passwort des Kontos an, das für die Verwaltung der Registrierung verwendet wird
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository kann Platzhalter mit Anfangszeichenfolge haben
** Beispiel neuvector/all&#42;:2&#42;
** &#42; um alle Bild-Tags zu scannen

image:10-redhat.png[redhat]

=== Openshift-Registrierung

==== OpenShift-Registrierung mit Benutzernamen und Passwort hinzufügen

* Wählen Sie OpenShift Registry als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die Registry-URL ein (die Sie aus der Ausgabe des Befehls "oc get is" im OpenShift-Netzwerk erhalten, wenn sie sich von der Standard-URL unterscheidet)
** Standard-URL der Registrierung `+https://docker-registry.default.svc:5000/+`
* Geben Sie den Benutzernamen und das Passwort des Kontos an, das für die Verwaltung der Registrierung verwendet wird
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Beispiel openshift/htt&#42;:&#42;
** &#42; um alle Bild-Tags zu scannen
* Aktivieren Sie den automatischen Scan, um den Scan zu starten, sobald das Image im OpenShift-Image-Stream aktualisiert wird.

image:1a_openshift.png[openshift]

==== OpenShift-Registrierung mit Token hinzufügen

* Wählen Sie OpenShift Registry als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die Registry-URL ein (die Sie aus der Ausgabe des Befehls "oc get is" im OpenShift-Netzwerk erhalten, wenn sie sich von der Standard-URL unterscheidet)
** Standard-URL der Registrierung `+https://docker-registry.default.svc:5000/+`
* Geben Sie das Token des Dienstkontos an, das Zugang zu allen Namensräumen hat.
** Prüfen Sie den folgenden Hinweis, um ein Dienstkonto zu erstellen und ein Token zu erhalten.
** Dienstkonto erstellen
*** oc projekt standard
*** oc erstellen sa nvqa
*** oc get sa
** Weisen Sie dem Dienstkonto die Rolle des Cluster-Administrators zu, um alle Registrierungsdaten zu lesen.
*** oc adm policy add-cluster-role-to-user cluster-admin system:serviceaccount:default:nvqa
** Token für das Dienstkonto abrufen
*** oc sa get-token nvqa
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Beispiel openshift/htt&#42;:&#42;
** &#42; um alle Bild-Tags zu scannen
* Aktivieren Sie den automatischen Scan, um den Scan zu starten, sobald das Image im OpenShift-Image-Stream aktualisiert wird.

image:1a_openshift_token.png[openshift]

==== Stabilitätsprobleme in Openshift 3.7 Registry

In OpenShift 3.7 können API-Aufrufe zum Abrufen von Container-Image-Metadaten oder zum Herunterladen eines Images zufällig fehlschlagen. Er kann auch bei zufälligen Bildern in verschiedenen Scanläufen fehlschlagen. In diesem Fall werden möglicherweise unvollständige Bildlisten angezeigt oder der Scanvorgang kann bei einigen Bildern fehlschlagen. Wenn dies der Fall ist, kann das Repository erneut gescannt werden.

=== JFrog Artefaktfabrik

Hinzufügen von JFrog Artifactory Registry (Docker Access method -- Repository Path) JFrog management page admin->HTTP Setting showing docker access method - Repository Path

image:12-jfrog.png[jfrog]

==== JFrog Artifactory Registry hinzufügen (Docker Access Methode -- Repository Path)

* Wählen Sie JFrog Artifactory als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
** Geben Sie die Registrierungs-URL mit Port ein, z. B. `+http://10.1.7.122:8081/+`
* Geben Sie einen Benutzernamen und ein Passwort an, falls dies von der Registrierung verlangt wird.
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository oder Tag können Platzhalter am Ende haben, z. B. abc/&#42;, abc/n&#42;
** Um alle Tags für ein Repository, zum Beispiel alpine, zu scannen, verwenden Sie alpine:&#42;
** Dem Platzhalter muss der vollständige Name, der Pfad oder die Anfangszeichenfolge vorangestellt werden
** &#42; um alle Tags zu scannen

==== Hinzufügen von JFrog Artifactory Registry (Docker Access Methode -- subdomain)

JFrog-Verwaltungsseite admin->HTTP-Einstellung zeigt Docker-Zugriffsmethode -- Subdomain

image:14-artifact.png[Artefakte]

JFrog Artifactory Registry hinzufügen (Docker Access Methode -- subdomain)

* Wählen Sie JFrog Artifactory als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die Registrierungs-URL mit Port ein, z. B. `+http://10.1.7.122:8081/+`
* Wählen Sie Subdomain als JFrog Docker Zugriffsmethode
* Geben Sie einen Benutzernamen und ein Passwort an, falls dies von der Registrierung verlangt wird.
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Subdomain/Repository:tag
** Repository oder Tag können Platzhalter am Ende haben, z. B. abc/&#42;, abc/n&#42;
** Um alle Tags für ein Repository, zum Beispiel alpine, zu scannen, verwenden Sie alpine:&#42;
** Dem Platzhalter muss der vollständige Name, der Pfad oder die Anfangszeichenfolge vorangestellt werden
** &#42; zum Scannen aller Tags aus allen Subdomains

[NOTE]
====
Erstellen Sie ein virtuelles Repository und fügen Sie ihm alle lokalen und entfernten Repositorys hinzu. Geben Sie dieses virtuelle Repository im Filterabschnitt an, um alle Tags des lokalen und des entfernten Repositorys zu scannen.
====

Hinzufügen einer Subdomain-basierten JFrog-Registry zum Scannen von Images aus der docker-lokalen Subdomain

image:jfrog_sub_local.png[.]

Hinzufügen einer Subdomain-basierten JFrog-Registry, um alle Tags von allen Subdomains zu scannen

image:jfrog_all_subs.png[alle]

==== Hinzufügen von JFrog Artifactory Registry (Docker Access Methode -- port)

JFrog-Verwaltungsseite admin->HTTP-Einstellung zeigt Docker-Zugriffsmethode - Port

image:jfrogport1.png[jfrogport]

JFrog-Verwaltungsseite admin->Lokales Repository->docker-local repository-> Erweitert - zeigt Repository-URL und Registry-Port 8181

image:jfrogport2.png[jfrogport]

JFrog Verwaltungsseite admin->Lokales Repository->guo repository-> Erweitert - zeigt Repository URL und Registry Port 8182

image:jfrogport3.png[jfrogport]

* Wählen Sie JFrog Artifactory als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die Registrierungs-URL mit Port ein, z. B. `+http://10.1.7.122:8181/+`
** Jeder Registername hat einen eindeutigen Port
* Wählen Sie Port als JFrog Docker Zugriffsmethode
* Geben Sie einen Benutzernamen und ein Passwort an, falls dies von der Registrierung verlangt wird.
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository oder Tag können Platzhalter am Ende haben, z. B. abc/_, abc/n_
** Um alle Tags für ein Repository, zum Beispiel alpine, zu scannen, verwenden Sie alpine:*
** Dem Platzhalter muss der vollständige Name, der Pfad oder die Anfangszeichenfolge vorangestellt werden
** &#42; zum Scannen aller Tags

Hinzufügen der JFrog-Registry für Port-Zugriffsmethode für die Registry docker-local mit Port 8181

image:jfrog104.png[jfrogport]

Hinzufügen der JFrog-Registry für Port-Zugriffsmethode für Registry mit Port 8182

image:jfrog105.png[jfrogport]

Hinzufügen der JFrog-Registry für die Port-Zugriffsmethode für die virtuelle Registry mit Port 8188, zu der alle lokalen Registries hinzugefügt wurden.

image:jfrog106.png[jfrogport]

Zeige gescanntes Ergebnis für docker-local registry

image:jfrogport6.png[jfrogport]

==== SaaS JFrog Artifactory Registry hinzufügen (Docker Zugriffsmethode -- Port)

Wählen Sie JFrog Artifactory als Typ

* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die URL der Registrierung ein, z. B. https://jfrogtraining-docker-nv-virtual.jfrog.io
* Wählen Sie Port als JFrog Docker Zugriffsmethode
* Geben Sie einen Benutzernamen und ein Passwort an, falls dies von der Registrierung verlangt wird.
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** &#42; um alle Tags aller Repositorys zu scannen

image:jfrog_saas.png[jfrogsaas]

==== Start des Scannens einer JFrog Artifactory-Registrierung

* Zu überprüfende Registrierung auswählen
* Klicken Sie zum Scannen auf die Schaltfläche Start
* Warten, bis der Status von "Scanning" auf "Idle" wechselt
** Die Scanzeit hängt von der Größe des Repositorys ab

=== Google Container Registry

Ref:
https://cloud.google.com/container-registry/docs/advanced-authentication
https://cloud.google.com/container-registry/docs/advanced-authentication#json_key_file

==== Aktivieren Sie Cloud Resource Manager API für das Projekt

Google Cloud Platform->Projekt auswählen->API und Dienste->APIS und Dienste aktivieren->Suche &quot;`+Cloud Resource Manager API+`&quot;->API aktivierenhttps://console.cloud.google.com/apis/library?project=nvtest-219600&q=Cloud%20Resource%20Manager%20API (Projektname ändern)

image:17-gcp.png[gcp]

==== Schlüssel für Containerdienstkonto erstellen

Google Cloud Platform->IAM->Servicekonto->Konto mit Containerregistrierung->CreateKey(action)

image:18-gcpiam.png[gcpiam]

==== json-Datei auf den Client-Rechner kopieren

==== Hinzufügen von Google Container Registry über die {product-name} GUI

* Wählen Sie als Typ Google-Registrierung
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die URL der Registrierung ein. Beispiel https://gcr.io/ (dies könnte auch us.gcr.io, eu.gcr.io usw. sein)
* Fügen Sie den gesamten Inhalt der oben erfassten json-Datei in den JSON-Schlüssel ein.
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Projekt-ID/Repository:tag
** Beispiel nvtestid-1/neuvector&#42;:&#42;
** &#42; um alle Bild-Tags zu scannen

image:19-gcpscan.png[gcpscan]

==== Scannen einer Google Container-Registrierung starten

* Zu überprüfende Registrierung auswählen
* Klicken Sie zum Scannen auf die Schaltfläche Start
* Warten, bis der Status von "Scanning" auf "Idle" wechselt
** Die Scanzeit hängt von der Größe des Repositorys ab

=== Azure Container Registry

Ref:
https://azure.microsoft.com/en-us/services/container-registry/

==== Erhalten Sie den Azure-Container-Benutzernamen und das Passwort wie unten gezeigt

Azure Container Registry -> Benutzer-> Zugriffsschlüssel->Passwort

Anzeige des Azure-Portal-Benutzernamens und -Kennworts für den Zugriff auf die Container-Registrierung

image:20-azure.png[azure]

==== Hinzufügen von Azure Container Registry über die {product-name} GUI

* Wählen Sie Azure-Registrierung als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Geben Sie die URL der Registrierung ein. Muster `+https://neuvector.azure.io+` (zu beziehen über das Azure-Portal)
** Containerregistrierung->user->Übersicht->Login Server
* Benutzernamen und Passwort hinzufügen
** Azure Container Registry -> Benutzer-> Zugriffsschlüssel->Passwort
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** repository:tag
** Beispiel alpin:&#42;
** &#42; um alle Bild-Tags zu scannen

Anzeige des Azure-Portal-Anmeldeservers für die Azure-Container-Registrierung

image:21-azurereg.png[azure]

Hinzufügen der Azure-Container-Registrierung zum Scannen aller Tags

image:22-azureadd.png[azureadd]

==== Scannen einer Azure Container Registry starten

* Zu überprüfende Registrierung auswählen
* Klicken Sie zum Scannen auf die Schaltfläche Start
* Warten, bis der Status von "Scanning" auf "Idle" wechselt
** Die Scanzeit hängt von der Größe des Repositorys ab

=== Sonatype Nexus Docker-Registrierung

Ref:
https://help.sonatype.com/repomanager3/private-registry-for-docker
https://hub.docker.com/r/sonatype/nexus3/

==== Sonatype Nexus Docker-Registrierung hinzufügen

* Wählen Sie Sonatype Nexus als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Registrierungs-URL mit Port eingeben
* Geben Sie Benutzernamen und Passwort an, falls dies von der Registrierung verlangt wird
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository kann Platzhalter mit Anfangszeichenfolge haben
** Beispiel neuvector/all&#42;:2&#42;
** &#42; um alle Bild-Tags zu scannen

Hinzufügen der Sonatype Nexus Docker-Registrierung mit Benutzername/Passwort und Repository &#42;:&#42; zum Scannen

image:23-sonatype.png[sonatype]

==== Starten Sie die Überprüfung der Sonatype Nexus Docker-Registrierung

* Zu überprüfende Registrierung auswählen
* Klicken Sie zum Scannen auf die Schaltfläche Start
* Warten, bis der Status von Scanning auf Idle wechselt
** Die Scanzeit hängt von der Größe des Repositorys ab

=== Gitlab Container-Registrierung

==== Beispiele für GitLab-Umgebungskonfigurationen

[,bash]
----
sudo docker run --detach \
  --hostname gitlab \
  --env GITLAB_OMNIBUS_CONFIG="external_url 'http://10.1.7.73:9096'; gitlab_rails['lfs_enabled'] = true;" \
  --publish 10.1.7.73:9095:9095 --publish 10.1.7.73:9096:9096 --publish 10.1.7.73:6222:22 \
  --name gitlab \
  --restart always \
  --volume /srv/gitlab/config:/etc/gitlab \
  --volume /srv/gitlab/logs:/var/log/gitlab \
  --volume /srv/gitlab/data:/var/opt/gitlab \
gitlab/gitlab-ce:latest
External_URL:  http://10.1.7.73:9096
Registry_URL: https://10.1.7.73:9095
----

==== Beziehen Sie das private Gitlab-Token wie unten gezeigt

* Navigieren Sie zur Einstellungsseite über das Symbol in der oberen rechten Ecke der GitLab-Anmeldeseite (siehe Abbildung unten):

image:gitlabsettings.png[gitlab]

* Navigieren Sie von der Seite User_Settings zur Seite Access_Tokens wie unten gezeigt:

image:gitlabusersettings.png[gitlab]

* Füllen Sie alle zutreffenden Felder aus, und klicken Sie auf &quot;`+Create personal access token+`&quot;, wenn Sie bereit sind, das Zugriffstoken zu generieren:

image:gitlabpersonaltoken_new.png[gitlab]

* Das Zugangstoken ist nicht mehr verfügbar, sobald der Benutzer die Seite mit dem generierten Token verlassen hat.  Es wird daher dringend empfohlen, eine Kopie des Zugangstokens zu erstellen, bevor Sie die folgende Seite aufrufen oder schließen:

image:gitlabaccesstoken.png[gitlab]

==== Abrufen von externen und Registrierungs-URLs

External-URL:   Die externe URL ist die URL des API-Servers. +
Registry-URL:  Diese kann über die Seite Container Registry der GitLab-Webkonsole abgerufen werden.  Eine Möglichkeit, zu dieser Seite zu gelangen, ist die Navigation von der GitLab-Webkonsole aus über Projekte > Ihre Projekte > Administrator / ... > Linker Bereich (Container Registry) > Mouse-over (root/.../)

Nachfolgend sehen Sie einen Beispielbildschirmausschnitt der Seite, der sowohl die externe URL als auch die Registrierungs-URL zeigt:

image:gitlabexternalurl.png[gitlab]

==== Hinzufügen der Gitlab-Registrierung über die {product-name} Konsole

* Wählen Sie Gitlab als Registry-Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Registrierungs-URL mit Port eingeben
* Geben Sie Benutzernamen und Passwort an, falls dies von der Registrierung verlangt wird
* Geben Sie die externe URL von Gitlab und das im letzten Abschnitt erhaltene private Token an

image:gitlabregistryscan.png[gitlab]

[NOTE]
====
Die Registry-URL wird verwendet, um Images von GitLab in die {product-name} Scanner-Plattform zu ziehen und die Registry zu scannen.  Die Externe URL wird zum Abrufen einer Liste von Bildern, Registern und Metadaten verwendet, die von der Funktion zum Scannen von Registern verwendet werden.
====

=== IBM Cloud Container Registry

Ref:  https://www.ibm.com/cloud/container-registry

==== IBM Container-Registrierung hinzufügen

* Wählen Sie IBM Cloud Container Registry als Typ
* Vergabe eines eindeutigen Namens für die Registrierung
* Registrierungs-URL eingeben https://us.icr.io/
* Geben Sie iamapikey als Benutzernamen und das unten stehende apikey als Passwort ein
** Apikey über CLI erstellen
*** ibmcloud iam api-key-create atibmKey
** Apikey von der GUI aus erstellen
*** IBM Cloud->Manage-Access(IAM)-IBM Cloud API Keys
* IBM Cloud-Konto bereitstellen
** IBM Cloud-Konto über CLI abrufen
*** Ibmcloud cr info
* Fügen Sie das Repository als Filter in folgendem Format hinzu
** Organisation/Repository:tag
** Repository kann Platzhalter mit Anfangszeichenfolge haben
** Beispiel neuvector/all__:2__
** {blank}
*** um alle Bild-Tags zu scannen
* Aktivieren Sie bei Bedarf weitere Parameter

image:ibm-1.png[ibm]

[NOTE]
====
Der Benutzername für die Registrierungsauthentifizierung muss "iamapikey" lauten.
====

=== Hafen-Register

Verwenden Sie die gleichen Anweisungen wie für die native Docker-Registrierung, wobei Sie **Harbor Registry** als Registrierung auswählen.

image::https://github.com/user-attachments/assets/9d382fde-7be4-423d-8401-c1034a9e4c2f[Harbor]

Das Filterfeld kann nicht leer gelassen werden. Geben Sie einen Repository-Filter ein, oder fügen Sie den Filter als * hinzu, um alle Repositories zu durchsuchen.

=== GitHub Container-Registrierung

Ab NeuVector v5.4.3 wird nun das Scannen von Bildern aus der https://ghcr.io[Container Registry (GHCR)] GitHub unterstützt, so dass Benutzer in GitHub gespeicherte Bilder in ihre Sicherheits- und Compliance-Workflows einbeziehen können.

==== Hinzufügen der GitHub Container Registry

Um die GHCR in NeuVector zu konfigurieren, gehen Sie zu **Add Registry** und wählen Sie **GitHub Container Registry** aus dem Dropdown-Menü des Registry-Typs.

|===
| Feld | Beschreibung

| **Name**
| Ein Name zur Identifizierung dieser Registrierungskonfiguration.

| **Registry**
| Die URL des GHCR-Registers. Beispiel: `+https://ghcr.io/+`.

| **Name des Benutzers**
| Ihr GitHub-Benutzername.

| **Token**
| Ein https://github.com/settings/tokens[Personal Access Token] GitHub mit der Berechtigung `+read:packages+` (und `+repo+` für den Zugriff auf private Bilder).

| **Filter**
| Geben Sie den zu überprüfenden Namensraum an (z. B. `+github_user/hello-world:*+` oder `+repo/package_name:version+`).
|===

==== Token-Berechtigungen

Um auf GHCR zuzugreifen, müssen Sie ein GitHub-Token mit den folgenden Gültigkeitsbereichen generieren:

* `+read:packages+` (erforderlich)
* `+repo+` (beim Zugriff auf private Repositories)

 können Sie einen Token erstellen https://github.com/settings/tokens[Hier].

==== Fehlersuche

Wenn Sie auf Probleme wie `+403 Forbidden+` oder `+invalid credentials+` stoßen, vergewissern Sie sich bitte:

* Ihr Token hat den richtigen Geltungsbereich.
* Die Registrierungs-URL ist korrekt formatiert (z. B. `+\https://ghcr.io/+`).