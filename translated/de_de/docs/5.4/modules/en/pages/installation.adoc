= Bereitstellungsvorbereitung
:revdate: 2025-01-10
:page-revdate: {revdate}
:page-opendocs-origin: /01.basics/03.installation/01.native/01.native.md
:page-opendocs-slug: /grundlagen/installation

== Verstehen, wie man {product-name} bereitstellt

Stellen Sie die {product-name} Container mit Kubernetes, OpenShift, Rancher, Docker oder anderen Plattformen bereit. Jeder Typ von {product-name} Container hat einen einzigartigen Zweck und kann spezielle Leistungs- oder Knotenauswahlanforderungen für einen optimalen Betrieb erfordern.

Die {product-name} Open-Source-Images sind auf Docker Hub unter `+/neuvector/{image name}+` gehostet.

Siehe den Abschnitt xref:production.adoc#_best_practices_tips_qa_for_deploying_and_managing_suse_security[Onboarding/Beste Praktiken], um einen Onboarding-Leitfaden herunterzuladen.

=== Bereitstellen mit Kubernetes, OpenShift, Rancher oder anderen Kubernetes-basierten Tools

Um {product-name} mit Kubernetes, OpenShift, Rancher oder anderen Orchestrierungstools bereitzustellen, siehe die Vorbereitungsschritte und Beispieldateien im Abschnitt xref:production.adoc#_planning_deployments[Bereitstellung von {product-name}]. Dies stellt Manager-, Controller-, Scanner- und Durchsetzungscontainer bereit. Für einfache Tests mit dem {product-name} All-in-One-Container siehe den Abschnitt Besondere Anwendungsfälle mit All-in-One.

{product-name} unterstützt die Helm-basierte Bereitstellung mit einem Helm-Chart unter https://github.com/neuvector/neuvector-helm.

Automatisierte Bereitstellungen werden mit Helm, Red Hat/Community-Operatoren, der REST-API oder einem Kubernetes ConfigMap unterstützt. Siehe den Abschnitt xref:configmap.adoc#_kubernetes_configmap[Bereitstellung mit ConfigMap] für weitere Details zur Automatisierung der Bereitstellung.

=== Bereitstellen mit Docker Native

Bevor Sie xref:docker.adoc[bereitstellen {product-name}] mit docker run oder compose, müssen Sie die CLUSTER_JOIN_ADDR auf die entsprechende IP-Adresse setzen. Finden Sie die Knoten-IP-Adresse, den Knotennamen (wenn Sie einen Namensserver verwenden) oder die Knotenvariable (wenn Sie Orchestrierungstools verwenden) für das All-in-One (Controller), die für die &quot;`+node IP+`&quot; in den Docker-Compose-Dateien für sowohl All-in-One als auch Durchsetzer verwendet werden sollen.  Zum Beispiel:

[,yaml]
----
- CLUSTER_JOIN_ADDR=192.168.33.10
----

Für Swarm-basierte Bereitstellungen fügen Sie auch die folgende Umgebungsvariable hinzu:

[,yaml]
----
- NV_PLATFORM_INFO=platform=Docker
----

Siehe den Abschnitt Bereitstellung {product-name} -> xref:docker.adoc[Docker-Produktionsbereitstellung] für Anweisungen und Beispiele.

=== Sichern von Konfigurationsdateien

Standardmäßig speichert {product-name} verschiedene Konfigurationsdateien in /var/neuvector/config/backup auf dem Controller oder All-in-One-Knoten.

Dieses Volume kann auf xref:production.adoc#_backups_and_persistent_data[persistente Speicherung] gemappt werden, um die Konfiguration beizubehalten. Dateien im Ordner müssen möglicherweise gelöscht werden, um neu zu starten.

=== Volume-Mapping

Stellen Sie sicher, dass die Volumes ordnungsgemäß gemappt sind. {product-name} benötigt diese, um zu funktionieren (/var/neuvector ist nur auf dem Controller/All-in-One erforderlich). Zum Beispiel:

[,yaml]
----
volumes:
        - /lib/modules:/lib/modules:ro
        - /var/neuvector:/var/neuvector
        - /var/run/docker.sock:/var/run/docker.sock:ro
        - /proc:/host/proc:ro
        - /sys/fs/cgroup:/host/cgroup:ro
----

Außerdem müssen Sie möglicherweise sicherstellen, dass andere Tools den Zugriff auf die docker.sock-Schnittstelle nicht blockieren.

=== Ports und Port-Mapping

Stellen Sie sicher, dass die erforderlichen Ports ordnungsgemäß gemappt und auf dem Host geöffnet sind. Der Manager oder All-in-One benötigt 8443 (wenn die Konsole verwendet wird). Der All-in-One und der Controller benötigen 18300, 18301, 18400, 18401 und optional 10443, 11443, 20443, 30443. Der Enforcer benötigt 18301 und 18401.

[NOTE]
====
Wenn Sie Docker nativ (einschließlich SWARM) bereitstellen, stellen Sie sicher, dass keine Host-Firewall den Zugriff auf erforderliche Ports wie firewalld blockiert. Wenn aktiviert, muss die docker0-Schnittstelle als vertrauenswürdige Zone für die All-in-One/Controller-Hosts hinzugefügt werden.
====

==== Port-Zusammenfassung

Die folgende Tabelle listet die Kommunikationen von jedem {product-name} Container auf. Der All-in-One-Container kombiniert die Manager-, Controller- und Enforcer-Container, sodass die für diese Container aufgeführten Ports benötigt werden.

image:Communication_Matrix_From_To.png[Ports]

Die folgende Tabelle fasst die lauschen Ports für jeden {product-name} Container zusammen.

image:Communication_Matrix_Listening_Ports.png[Hören]

===== Zusätzliche Ports

In Version 5.1 wurde ein neuer Listener-Port auf 8181 im Controller nur für die lokale Controller-Kommunikation hinzugefügt.

[,shell]
----
tcp        0      0 :::8181                 :::*                    LISTEN      8/opa
----
