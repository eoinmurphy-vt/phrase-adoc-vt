= Test de téléchargement de certificat Chrome - MacOS
:revdate: 2024-09-27
:page-revdate: {revdate}
:page-opendocs-origin: /03.configuration/01.console/02.chrome/02.chrome.md
:page-opendocs-slug: /configuration/console/chrome

== Test de l'activation des navigateurs Chrome pour accepter le certificat auto-signé \{product-name} sur MacOS

Dans certaines circonstances, le navigateur Chrome refusera catégoriquement d'accepter un certificat auto-signé \{product-name}.  Une raison possible pourrait être que le certificat n'a pas encore été importé dans le magasin de certificats de connexion de macOS.  Une autre possibilité est qu'un certificat existant n'a pas encore été configuré pour être de confiance.  Cela empêchera l'utilisateur de l'accepter et de procéder à la page de connexion \{product-name} en utilisant Chrome, comme illustré dans l'exemple ci-dessous :

image:chrome1.png[chrome]

Des mesures correctives peuvent être prises pour permettre à Chrome d'accepter le certificat auto-signé placé dans le magasin de clés de macOS.  Cela peut être fait en configurant le certificat de \{product-name} pour qu'il soit de confiance en utilisant l'application Accès au trousseau de Mac.  Cela suppose que le certificat existe effectivement dans le magasin Accès au trousseau de macOS.  Nous allons d'abord voir comment exporter un certificat d'un nœud \{product-name} existant d'un système, puis l'importer dans un autre système.   Il y a 2 façons d'exporter le certificat que nous allons examiner ci-dessous.  Elles consistent à utiliser le navigateur Chrome et à utiliser l'application Accès au trousseau de macOS.

=== Test d'exportation de certificat utilisant Chrome

La capture d'écran ci-dessous illustre comment accéder au certificat \{product-name} en utilisant Chrome.

image:chrome2.png[chrome]

Pour exporter le certificat, faites glisser et déposez le certificat à un emplacement de votre choix.

image:chrome3.png[chrome]

=== Test d'exportation de certificat utilisant Accès au trousseau de macOS

Lancez l'application Accès au trousseau de macOS en entrant simultanément les touches ⌘ + F sur un clavier Mac, recherchez Accès au trousseau, et double-cliquez sur l'application.
Cela lance l'application Accès au trousseau.  Sélectionnez le certificat \{product-name} et choisissez Exporter "`+{product-name}+`" dans le menu déroulant.  Cela permettra l'exportation du certificat vers un emplacement de choix.

image:chrome4.png[chrome]

=== Test de lancement de l'application Accès au trousseau macOS

Il existe deux façons de lancer l'application Accès au trousseau macOS.  Cela peut être fait en recherchant depuis macOS, comme décrit dans les étapes ci-dessus, ou en utilisant le navigateur Chrome.

=== Test de lancement de l'Accès au trousseau depuis le navigateur Chrome

Paramètres > Avancé > Gérer les certificats

image:chrome5.png[chrome]

Cliquer sur Gérer les certificats comme montré ci-dessus lance l'application Accès au trousseau du Mac comme montré ci-dessous.

image:chrome6.png[chrome]

=== Test d'importation de certificat dans le magasin Accès au trousseau macOS

Lancez l'application Accès au trousseau macOS en entrant simultanément les touches ⌘ + F avec un clavier Mac, recherchez Accès au trousseau et cliquez sur l'application.  Ensuite, importez le certificat en faisant glisser et déposer un certificat \{product-name} (exemple : nvcertificate.cer) dans le panneau droit des certificats de l'application Accès au trousseau.  Maintenant que le certificat a été importé, il n'est pas encore approuvé.
Voici un exemple montrant les paramètres de confiance par défaut après qu'un certificat \{product-name} a été importé dans l'application Accès au trousseau.

image:chrome7.png[chrome]

Remarquez qu'aucun des paramètres n'a été configuré, et il n'est pas approuvé par défaut.  Il doit être configuré pour être approuvé afin de permettre à l'utilisateur d'accéder à la page de connexion en utilisant le navigateur Chrome.

=== Test d'activation de la confiance pour le certificat \{product-name}

Les étapes suivantes détaillent comment activer la confiance pour le certificat \{product-name} dans le magasin Accès au trousseau.

image:chrome8.png[chrome]

Un double-clic sur le certificat \{product-name} de la capture d'écran ci-dessus fera apparaître une autre boîte de dialogue contextuelle qui permet de configurer les autorisations de confiance pour différents paramètres.  Configurer le protocole SSL (Secure Sockets Layer) sur "`+Toujours faire confiance+`".

image:chrome9.png[chrome]

Fermez la boîte de dialogue et cliquez sur '\`+Mettre à jour les paramètres+`" après avoir saisi le mot de passe de l'utilisateur de connexion Mac dans la boîte de dialogue contextuelle suivante.

image:chrome10.png[chrome]

Cela finalise les configurations de confiance.  Ensuite, effacez tout le cache du navigateur Chrome, fermez tous les navigateurs Chrome et relancez le navigateur Chrome.  Ensuite, visitez la page de connexion \{product-name}, et en cliquant sur le lien "`+Avancé+`", le lien Procéder à ... (non sécurisé) sera affiché.  Cliquer sur Procéder à ... (non sécurisé) permettra à l'utilisateur de passer à la page de connexion avec le nom d'utilisateur et le mot de passe.

image:chrome11.png[chrome]

Ci-dessous se trouve une capture d'écran qui permet à l'utilisateur de passer à la page de connexion \{product-name} après avoir cliqué sur le lien Procéder à ... (non sécurisé).

image:chrome12.png[chrome]
