= Modes : Découvrir, Surveiller, Protéger
:revdate: 2024-09-27
:page-revdate: {revdate}
:page-opendocs-origin: /05.policy/02.modes/02.modes.md
:page-opendocs-slug:  /stratégie/modes

== {product-name} Modes

Le module de détection de violation {product-name} a trois modes : Découvrir, Surveiller et Protéger. À tout moment, tout groupe (commençant par 'nv', ou le groupe 'Nodes') peut être dans l'un de ces modes. Le mode peut être changé depuis le menu des groupes, la vue d'activité réseau ou le tableau de bord. Les groupes de conteneurs peuvent avoir des règles de processus/fichier dans un mode différent de celui des règles réseau, comme décrit xref:modes.adoc#_network_service_policy_mode[ici].

image:switchmodes.png[Modes]

[NOTE]
====
Les groupes créés sur mesure n'ont pas de mode de protection. C'est parce qu'ils peuvent contenir des conteneurs provenant de différents groupes sous-jacents, chacun pouvant être dans un mode différent, ce qui entraîne une confusion sur le comportement.
====

=== Découvrir

Par défaut, {product-name} commence en mode Découvrir. Dans ce mode, {product-name} :

* Découvre votre infrastructure de conteneurs, y compris les conteneurs, les nœuds et les hôtes.
* Apprend vos applications et comportements en observant les conversations (connexions réseau) entre les conteneurs.
* Identifie les services et applications distincts en cours d'exécution.
* Construit automatiquement une liste blanche de règles réseau pour protéger le comportement normal du réseau des applications.
* Établit des bases pour les processus en cours d'exécution dans les conteneurs pour chaque service et crée des règles de profil de processus en liste blanche.

[NOTE]
====
Pour déterminer combien de temps exécuter un service en mode Découverte, faites passer du trafic de test par l'application et examinez toutes les règles pour en vérifier l'exhaustivité. Plusieurs heures devraient suffire, mais certaines applications peuvent nécessiter quelques jours pour être pleinement exercées. En cas de doute, passez en mode Surveillance et vérifiez les violations, qui peuvent ensuite être converties en règles de liste blanche avant de passer en mode Protection.
====

=== Surveillance

En mode Surveillance, {product-name} surveille les conversations et détecte les violations en temps réel de votre Politique de Sécurité. Dans ce mode, aucune nouvelle règle n'est créée par {product-name}, mais des règles peuvent être ajoutées manuellement à tout moment.

Lorsque des violations sont détectées, elles sont visibles dans la carte d'Activité Réseau visuellement par une ligne rouge. Les violations sont également enregistrées et affichées dans l'onglet Notifications. Les violations de règles de profil de processus et d'accès aux fichiers sont enregistrées dans les Notifications -> Événements de Sécurité.

Dans la carte Réseau, vous pouvez cliquer sur n'importe quelle conversation (ligne verte, jaune, rouge) pour afficher plus de détails sur le type de connexion et le protocole surveillé en dernier. Vous pouvez également utiliser les boutons Rechercher et Filtrer par Groupe en bas à droite pour affiner l'affichage de vos conteneurs.

=== Protection

En mode Protection, {product-name} les agents bloqueront (refuseront) toute violation et attaque réseau détectée. Les violations sont affichées dans la carte Réseau avec un '`x`' rouge, ce qui signifie qu'elles ont été bloquées. Les processus non autorisés et l'accès aux fichiers seront également bloqués en mode Protection. Les capteurs DLP qui correspondent bloqueront les connexions réseau.

== Changement entre les Modes

Vous pouvez facilement changer {product-name} Groupes d'un mode à un autre. N'oubliez pas qu'en mode Découverte, {product-name} construit une Politique de Sécurité pour le comportement normal des conteneurs autorisés. Vous pouvez voir ces règles dans l'onglet Politique -> Groupes ou en détail dans le menu Règles Réseau -> Politique.

Lorsque vous passez du mode Découverte au mode Surveillance, {product-name} signalera toutes les violations du comportement normal non explicitement autorisées. Parce que {product-name} applique la stratégie basée sur des applications et des groupes avec des attributs similaires, il n'est généralement pas nécessaire d'ajouter ou de modifier des règles lors de l'augmentation ou de la réduction des conteneurs.

Veuillez vous assurer qu'avant d'introduire de nouvelles mises à jour qui entraînent de nouveaux types de connexions entre les conteneurs, vous passez les Service(s) concernés en mode Découverte pour apprendre ces nouveaux comportements. Alternativement, vous pouvez ajouter manuellement de nouvelles règles en mode quelconque, ou modifier le CRD utilisé pour créer les règles afin d'ajouter de nouveaux comportements.

=== Nouveau mode de service

Si de nouveaux services sont découverts par {product-name}, par exemple un conteneur précédemment inconnu commence à fonctionner, il peut être défini sur un mode par défaut. En mode Découverte, {product-name} commencera à apprendre son comportement et à établir des règles. En mode Surveillance, une violation sera générée lorsque des connexions au nouveau service seront détectées. En mode Protection, toutes les connexions au nouveau service seront bloquées à moins que les règles n'aient été créées au préalable.

image:newservices.png[NewServiceMode]

=== Mode de stratégie de service réseau

Il existe un paramètre global disponible dans les paramètres -> Configuration pour définir séparément le mode de protection réseau pour l'application des règles réseau. L'activation de cela (par défaut désactivé) entraîne le fait que toutes les règles réseau soient dans le mode de protection sélectionné (Découverte, Surveillance, Protection), tandis que les règles de processus/fichier restent dans le mode de protection pour ce groupe, comme affiché dans l'écran des groupes de stratégie ->. De cette manière, les règles réseau peuvent être définies sur Protection (blocage), tandis que la stratégie de processus/fichier peut être définie sur Surveillance, ou vice versa.

=== Promotion automatisée des modes de groupe

Promote le mode de protection d'un groupe basé sur le temps écoulé et des critères. Cette automatisation ne s'applique pas aux groupes créés par CRD. Cette fonctionnalité permet à une nouvelle application de fonctionner en Découverte pendant une certaine période, apprenant le comportement et {product-name} créant des règles de liste d'autorisation pour le réseau et le processus, puis passant automatiquement au mode Surveillance, puis au mode Protection.

Le critère pour passer du mode Découverte au mode Surveillance est : le temps écoulé pour apprendre toute l'activité réseau et de processus d'au moins un pod en direct dans le groupe. Par exemple, si cela est défini sur 7 jours, alors 7 jours après qu'un pod en cours d'exécution pour le groupe soit détecté, le mode sera automatiquement promu à Surveillance.

Le critère pour passer du mode Surveillance au mode Protection est : il n'y a pas d'événements de sécurité (réseau, processus, etc.) pour la période définie pour le groupe. Par exemple, si cela est réglé sur 14 jours, alors si aucune violation (réseau, processus, fichier) n'est déclenchée pendant 14 jours (par exemple, la période de silence), le mode est automatiquement promu à Protect. S'il n'y a pas de pods en cours d'exécution dans le groupe, la promotion ne se produira pas.

image:policy_promotion.png[Promotion]

==== Résolution de Conflits Entre Services Dans Différents Modes

Pour les connexions réseau entre des conteneurs dans différents groupes de services, si leurs modes de politique sont différents, le tableau suivant montre comment le système résout les conflits.

|===
| Source | Destination | Mode Efficace

| Découvrir
| Surveillance
| Découvrir

| Découvrir
| Protection
| Découvrir

| Surveillance
| Découvrir
| Découvrir

| Surveillance
| Protection
| Surveillance

| Protection
| Découvrir
| Découvrir

| Protection
| Surveillance
| Surveillance
|===

Comme vous pouvez le voir, le mode efficace par défaut est toujours le mode de politique le moins restrictif.

[NOTE]
====
Ce qui précède s'applique uniquement aux Règles Réseau
====
