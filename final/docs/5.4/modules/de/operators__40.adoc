= Einsatz mit Operatoren
:revdate: 2025-06-02
:page-revdate: {revdate}
:page-opendocs-origin: /02.deploying/01.production/02.operators/02.operators.md
:page-opendocs-slug: /deploying/production/operators

== Betreiber

Die Betreiber nutzen das betriebliche Wissen der Menschen und kodieren es in Software, die leichter an die Verbraucher weitergegeben werden kann. Operatoren sind Softwareteile, die die Komplexität des Betriebs einer anderen Software erleichtern. Technisch gesehen sind Operatoren eine Methode zum Verpacken, Bereitstellen und Verwalten einer Kubernetes-Anwendung.

== {product-name} Betreiber

Der {product-name} Operator basiert auf der {product-name} Helmkarte. Der {product-name} RedHat OpenShift Operator wird in der OpenShift Container-Plattform ausgeführt, um die Komponenten des {product-name} Security-Clusters bereitzustellen und zu verwalten. Der {product-name} Operator enthält alle notwendigen Informationen, um {product-name} mit Hilfe von Helm-Karten einzusetzen. Sie müssen lediglich den {product-name} Operator aus dem OpenShift embedded Operator Hub installieren und die {product-name} Instanz erstellen.

Um die neuesten {product-name} Container-Versionen bereitzustellen, verwenden Sie entweder den link:https://catalog.redhat.com/search?searchType=software&deployed_as=Operator&partnerName={product-name}&p=1[Red Hat Certified Operator] von Operator Hub oder den link:https://github.com/redhat-openshift-ecosystem/community-operators-prod/tree/main/operators/neuvector-community-operator[community operator]. Die Dokumentation für den Community-Operator finden Sie unter https://github.com/neuvector/neuvector-operator[{product-name} operator].

[NOTE]
.Hinweis zu SCC und Upgrading
====

Privilegierte SCC wird in neuen Bereitstellungen ab Operator Version 1.3.4 zu dem in der Bereitstellungs-Yaml angegebenen Dienstkonto hinzugefügt. Wenn Sie {product-name} Operator von einer früheren Version auf 1.3.4 aktualisieren, löschen Sie bitte vor der Aktualisierung die privilegierte SCC.

[,shell]
----
oc delete rolebinding -n neuvector system:openshift:scc:privileged
----
====

[IMPORTANT]
====
{product-name} Zertifizierte Operator-Versionen sind an {product-name} Produktversionen gebunden, und jede neue Version muss vor ihrer Veröffentlichung einen Zertifizierungsprozess mit Red Hat durchlaufen. Die zertifizierte Betreiberversion für 5.3.x ist an die Helmversion 2.7.2 und die {product-name} App-Version 5.3.2 gebunden. Die zertifizierte Betreiberversion 1.3.9 ist an {product-name} Version 5.2.0 gebunden. Die zertifizierte Betreiberversion 1.3.7 ist an {product-name} Version 5.1.0 gebunden. Die Betreiberversion 1.3.4 ist an {product-name} 5.0.0 gebunden. Wenn Sie in der Lage sein möchten, die Versions-Tags der eingesetzten {product-name} Container zu ändern, verwenden Sie bitte die Community-Version.
====

.Einsatz mit zertifiziertem Operator
[%collapsible]
======
*Bereitstellung mit dem Red Hat Certified Operator von Operator Hub*

[IMPORTANT]
====
{product-name} Operator-Versionen sind an {product-name} Produktversionen gebunden, und jede neue Produktversion muss vor der Veröffentlichung einen Zertifizierungsprozess mit Red Hat durchlaufen.
====

*Technische Hinweise*

* {product-name} Container-Images werden von registry.connect.redhat.com unter Verwendung des RedHat Market Place Image Pull Secret bezogen.
* Die {product-name} manager UI wird in der Regel über eine OpenShift-Passthrough-Route auf einer Domain bereitgestellt. Zum Beispiel auf IBM Cloud neuvector-route-webui-neuvector.(cluster_name)-(random_hash)-0000.(region).containers.appdomain.cloud. Er kann auch als Dienst neuvector-service-webui über eine Knotenportadresse oder eine öffentliche IP-Adresse bereitgestellt werden.
* OpenShift Version >=4.6.

. Erstellen Sie das Projekt neuvector
+
--
[,shell]
----
oc new-project neuvector
----
--
. Installieren Sie den RedHat Certified Operator über den Operator Hub 
** Navigieren Sie in der OpenShift Console UI zu OperatorHub 
** Suchen Sie nach {product-name} Operator und wählen Sie den Eintrag ohne Community- oder Marktplatz-Plakette 
** Installieren klicken
. Aktualisierungskanal konfigurieren 
** Der aktuellste Kanal ist Beta, wird aber möglicherweise in Zukunft zu Stable verschoben. 
** Wählen Sie Stall, wenn verfügbar
. Konfigurieren Sie den Installationsmodus und den installierten Namespace 
** Bestimmten Namespace auf dem Cluster auswählen 
** Wählen Sie neuvector als installierten Namespace 
** Genehmigungsstrategie konfigurieren
. Bestätigen Sie die Installation
. Bereiten Sie die YAML-Konfigurationswerte für die Installation von {product-name} vor, wie im folgenden Beispielbildschirm gezeigt. Die YAML-Datei, die in der OpenShift-Konsole angezeigt wird, enthält alle verfügbaren Konfigurationsoptionen und ihre Standardwerte. 
+
image:operator_cert.png[]
. Wenn der Operator installiert und einsatzbereit ist, kann eine {product-name} Instanz installiert werden. 
** Klicken Sie auf Operator anzeigen (nach der Installation des Operators) oder wählen Sie den {product-name} Operator aus der Ansicht "Installierte Operatoren". 
** Klicken Sie auf Instanz erstellen 
** Wählen Sie Konfigurieren über YAML-Ansicht 
** Einfügen der vorbereiteten YAML-Konfigurationswerte 
** Klicken Sie auf Erstellen
. Überprüfen Sie die Installation der Instanz {product-name}
** Navigieren Sie zu den Operator-Details des {product-name} Operators 
** Öffnen Sie die Registerkarte {product-name}
** Wählen Sie die neuvector-default-Instanz 
** Öffnen Sie die Registerkarte Ressourcen 
** Überprüfen Sie, ob die Ressourcen den Status Erstellt oder In Betrieb haben.

Nachdem Sie die {product-name} Plattform erfolgreich in Ihrem Cluster installiert haben, melden Sie sich bei der {product-name} Konsole unter `https://neuvector-route-webui-neuvector.(OC_INGRESS)` an. * Melden Sie sich mit dem ursprünglichen Benutzernamen admin und dem Kennwort admin an. * Akzeptieren Sie die {product-name} Endbenutzer-Lizenzvereinbarung. * Ändern Sie das Passwort des Benutzers admin. Optional können Sie auch zusätzliche Benutzer im Menü Einstellungen -> Benutzer & Rollen anlegen. Jetzt können Sie in der Konsole {product-name} navigieren, um Schwachstellen zu scannen, laufende Anwendungs-Pods zu beobachten und Sicherheitsmaßnahmen auf Container anzuwenden.

*Aktualisieren von {product-name}*

Aktualisieren Sie die Version {product-name}, indem Sie die Operator-Version aktualisieren, die mit der gewünschten Version {product-name} verbunden ist.
======

.Einsatz mit Community Operator
[%collapsible]
======
*Bereitstellung mit dem {product-name} Community Operator von Operator Hub aus*

*Technische Hinweise*

* {product-name} Container-Images werden von Docker Hub über das Konto {product-name} bezogen. 
* {product-name} Manager UI wird in der Regel über eine OpenShift-Passthrough-Route in einer Domäne bereitgestellt. Zum Beispiel auf IBM Cloud neuvector-route-webui-neuvector.(cluster_name)-(random_hash)-0000.(region).containers.appdomain.cloud. Er kann auch als Dienst neuvector-service-webui über eine Knotenportadresse oder eine öffentliche IP-Adresse bereitgestellt werden. 
* OpenShift Version 4.6+ 
* Es wird empfohlen, die {product-name} Installationskonfiguration zu überprüfen und zu ändern, indem Sie die yaml-Werte ändern, bevor Sie die {product-name} Instanz erstellen. Beispiele sind imagePullSecrets name, tag version, ingress/console access, multi-cluster federation, persistent volume PVC usw. Die Werte, die während der Installation geändert werden können, entnehmen Sie bitte der Helm-Anleitung unter https://github.com/neuvector/neuvector-helm.

. Erstellen Sie das Projekt neuvector
+
--
[,shell]
----
oc new-project neuvector
----
--
. Installieren Sie den {product-name} Community Operator über den Operator Hub 
** Navigieren Sie in der OpenShift Console UI zu OperatorHub 
** Suchen Sie nach {product-name} Operator und wählen Sie den Eintrag mit dem Community-Badge 
** Installieren klicken 
** Konfigurieren Sie den Aktualisierungskanal. Der aktuellste Kanal ist Beta, wird aber möglicherweise in Zukunft zu Stable verschoben. Wählen Sie stabil, wenn verfügbar. 
** Konfigurieren Sie den Installationsmodus und den installierten Namespace 
** Bestimmten Namespace auf dem Cluster auswählen 
** Wählen Sie neuvector als installierten Namespace 
** Genehmigungsstrategie konfigurieren 
** Bestätigen Sie die Installation
. Laden Sie das geheime Kubernetes-Manifest herunter, das die Anmeldeinformationen für den Zugriff auf die Container-Registry {product-name} enthält. Speichern Sie die YAML-Manifestdatei unter ./neuvector-secret-registry.yaml.
. Wenden Sie das geheime Kubernetes-Manifest an, das die Anmeldeinformationen für die Registrierung enthält.
+
--
[,shell]
----
kubectl apply -n neuvector -f ./neuvector-secret-registry.yaml
----
--
. Bereiten Sie die YAML-Konfigurationswerte für die Installation von {product-name} anhand des folgenden YAML-Schnipsels vor. Vergewissern Sie sich, dass Sie die gewünschte Version von {product-name} im "tag"-Wert angeben. Überprüfen Sie die Referenzwerte in der Tabelle {product-name} Helm, um die verfügbaren Konfigurationsoptionen zu erhalten. Es gibt weitere mögliche Helm-Werte, die in der YAML konfiguriert werden können, z. B. ob Sie den Cluster so konfigurieren, dass er die Verwaltung mehrerer Cluster durch die Bereitstellung der Master- (Federated Master) oder Remote-Dienste (Federated Worker) ermöglicht.
+
--
[,yaml]
----
apiVersion: apm.neuvector.com/v1alpha1
kind: Neuvector
metadata:
  name: neuvector-default
  namespace: neuvector
spec:
  openshift: true
  tag: 4.3.0
  registry: docker.io
  exporter:
    image:
      repository: prometheus-exporter
      tag: 0.9.0
  manager:
    enabled: true
    env:
      ssl: true
    image:
      repository: manager
    svc:
      type: ClusterIP
      route:
        enabled: true
        termination: passthrough
  enforcer:
    enabled: true
    image:
      repository: enforcer
  cve:
    updater:
      enabled: true
      image:
        repository: updater
        tag: latest
      schedule: 0 0 * * *
    scanner:
      enabled: true
      replicas: 3
      image:
        repository: scanner
        tag: latest
  controller:
    enabled: true
    image:
      repository: controller
    replicas: 3
----
--
. Wenn der Operator installiert und einsatzbereit ist, kann eine {product-name} Instanz installiert werden. 
** Klicken Sie auf Operator anzeigen (nach der Installation des Operators) oder wählen Sie den {product-name} Operator aus der Ansicht "Installierte Operatoren". 
** Klicken Sie auf Instanz erstellen 
** Wählen Sie Konfigurieren über YAML-Ansicht 
** Einfügen der vorbereiteten YAML-Konfigurationswerte 
** Klicken Sie auf Erstellen
. Überprüfen Sie die Installation der Instanz {product-name}. 
** Navigieren Sie zu den Operator-Details des {product-name} Operators 
** Öffnen Sie die Registerkarte {product-name}
** Wählen Sie die neuvector-default-Instanz 
** Öffnen Sie die Registerkarte Ressourcen 
** Überprüfen Sie, ob die Ressourcen den Status Erstellt oder In Betrieb haben.
. Nachdem Sie die {product-name} Plattform erfolgreich in Ihrem Cluster bereitgestellt haben, melden Sie sich an der {product-name} Konsole unter `https://neuvector-route-webui-neuvector.(INGRESS_DOMAIN)` an. 
** Melden Sie sich mit dem ursprünglichen Benutzernamen admin und dem Passwort admin an. 
** Akzeptieren Sie die Endbenutzer-Lizenzvereinbarung {product-name}. 
** Ändern Sie das Passwort des Benutzers admin. 
** Optional können Sie auch zusätzliche Benutzer im Menü Einstellungen -> Benutzer & Rollen anlegen.

Jetzt können Sie in der Konsole {product-name} navigieren, um Schwachstellen zu scannen, laufende Anwendungs-Pods zu beobachten und Sicherheitsmaßnahmen auf Container anzuwenden.

*Aktualisieren von {product-name}*

. Von Operatoren > Installierte Operatoren > {product-name} Operator 
+
image:1_Installed.png[]
. Klicken Sie auf {product-name}, um die Instanzen aufzulisten. 
+
image:2_Instance.png[]
. Klicken Sie auf YAML, um Parameter zu bearbeiten 
+
image:3_YAML.png[]
. Tag aktualisieren und auf Speichern klicken 
+
image:4_tag_save.png[]
======

=== Fehlersuche

* Überprüfen Sie die Operator-Bereitstellungswerte in der bereitgestellten yaml-Datei
* Überprüfen Sie, ob die Sicherheitskontextbeschränkung (SCC) für {product-name} in Schritt 2 erfolgreich hinzugefügt wurde.
* Überprüfen Sie die Werte der {product-name} Helm-Karte.
* Vergewissern Sie sich, dass der Registrierungspfad und das Versions-Tag richtig gesetzt sind (Community-Operator; zertifiziert verwendet die Standardeinstellungen)
* Stellen Sie sicher, dass die Route zum {product-name} manager-Dienst neuvector-route-webui konfiguriert ist
