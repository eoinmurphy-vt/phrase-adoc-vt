= Bereitstellung mit Operatoren
:revdate: 2025-06-02
:page-revdate: {revdate}
:page-opendocs-origin: /02.deploying/01.production/02.operators/02.operators.md
:page-opendocs-slug: /bereitstellung/produktion/operatoren

== Operatoren

Operatoren nehmen menschliches Betriebswissen und kodieren es in Software, die leichter mit Verbrauchern geteilt werden kann. Operatoren sind Softwareteile, die die betriebliche Komplexität beim Ausführen eines anderen Softwareteils erleichtern. Technisch gesehen sind Operatoren eine Methode zum Verpacken, Bereitstellen und Verwalten einer Kubernetes-Anwendung.

== {product-name} Operatoren

Der {product-name} Operator basiert auf dem {product-name} Helm-Chart. Der {product-name} RedHat OpenShift Operator läuft in der OpenShift-Containerplattform, um die {product-name} Sicherheitsclusterkomponenten bereitzustellen und zu verwalten. Der {product-name} Operator enthält alle notwendigen Informationen, um {product-name} mit Helm-Charts bereitzustellen. Sie müssen einfach den {product-name} Operator aus dem eingebetteten Operator-Hub von OpenShift installieren und die {product-name} Instanz erstellen.

Um die neuesten {product-name} Container-Versionen bereitzustellen, verwenden Sie entweder den link:https://catalog.redhat.com/search?searchType=software&deployed_as=Operator&partnerName={product-name}&p=1[Red Hat Certified Operator] aus dem Operator Hub oder den link:https://github.com/redhat-openshift-ecosystem/community-operators-prod/tree/main/operators/neuvector-community-operator[Community-Operator]. Die Dokumentation für den Community-Operator finden Sie https://github.com/neuvector/neuvector-operator[{product-name} Operator].

[NOTE]
.Hinweis zu SCC und Upgrade
====

Privileged SCC wird dem Dienstkonto hinzugefügt, das in der Bereitstellungs-YAML von Operator-Version 1.3.4 und höher in neuen Bereitstellungen angegeben ist. Im Falle eines Upgrades des {product-name} Operators von einer vorherigen Version auf 1.3.4, bitte Privileged SCC vor dem Upgrade löschen.

[,shell]
----
oc delete rolebinding -n neuvector system:openshift:scc:privileged
----
====

[IMPORTANT]
====
{product-name} Zertifizierte Operator-Versionen sind an {product-name} Produktversionen gebunden, und jede neue Version muss einen Zertifizierungsprozess mit Red Hat durchlaufen, bevor sie veröffentlicht wird. Die zertifizierte Operator-Version für 5.3.x ist an die Helm-Version 2.7.2 und die {product-name} App-Version 5.3.2 gebunden. Die zertifizierte Operator-Version 1.3.9 ist an die {product-name} Version 5.2.0 gebunden. Die zertifizierte Betreiber-Version 1.3.7 ist an {product-name} Version 5.1.0 gebunden. Die Betreiber-Version 1.3.4 ist an {product-name} 5.0.0 gebunden. Wenn Sie die Versions-Tags der {product-name} bereitgestellten Container ändern möchten, verwenden Sie bitte die Community-Version.
====

.Bereitstellen mit zertifiziertem Betreiber
[%collapsible]
======
*Bereitstellen mit dem Red Hat Certified Operator aus dem Operator Hub*

[IMPORTANT]
====
{product-name} Betreiber-Versionen sind an {product-name} Produktversionen gebunden, und jede neue Produktversion muss vor der Veröffentlichung einen Zertifizierungsprozess mit Red Hat durchlaufen.
====

*Technische Hinweise*

* {product-name} Container-Images werden von registry.connect.redhat.com unter Verwendung des RedHat-Marktplatz-Image-Pull-Geheimnisses abgerufen.
* Die {product-name} Manager-Benutzeroberfläche wird typischerweise über eine OpenShift-Passthrough-Route auf einer Domain bereitgestellt. Zum Beispiel auf IBM Cloud neuvector-route-webui-neuvector.(cluster_name)-(random_hash)-0000.(region).containers.appdomain.cloud. Es kann auch als Dienst neuvector-service-webui über eine Node-Port-Adresse oder eine öffentliche IP bereitgestellt werden.
* OpenShift-Version >=4.6.

. Erstellen Sie das Projekt neuvector
+
--
[,shell]
----
oc new-project neuvector
----
--
. Installieren Sie den RedHat Certified Operator aus dem Operator Hub 
** Navigieren Sie in der OpenShift Console UI zu OperatorHub 
** Suchen Sie nach {product-name} Operator und wählen Sie die Auflistung ohne Community- oder Marktplatz-Abzeichen aus 
** Klicken Sie auf Installieren
. Konfigurieren Sie den Update-Kanal 
** Der aktuelle neueste Kanal ist Beta, könnte aber in Zukunft auf stabil verschoben werden 
** Wählen Sie stabil, wenn verfügbar
. Installationsmodus und installiertes Namensraum konfigurieren 
** Bestimmten Namensraum im Cluster auswählen 
** Neuvector als installiertes Namensraum auswählen 
** Genehmigungsstrategie konfigurieren
. Installation bestätigen
. Bereiten Sie die YAML-Konfigurationswerte für die {product-name} Installation wie im Beispiel-Screenshot unten gezeigt vor. Die im OpenShift Console präsentierte YAML bietet alle verfügbaren Konfigurationsoptionen und deren Standardwerte. 
+
image:operator_cert.png[]
. Wenn der Operator installiert und einsatzbereit ist, kann eine {product-name} Instanz installiert werden. 
** Klicken Sie auf Operator anzeigen (nach der Operatorinstallation) oder wählen Sie den {product-name} Operator aus der Ansicht der installierten Operatoren aus 
** Klicken Sie auf Instanz erstellen 
** Wählen Sie Konfigurieren über YAML-Ansicht 
** Fügen Sie die vorbereiteten YAML-Konfigurationswerte ein 
** Klicken Sie auf Erstellen
. Überprüfen Sie die Installation der {product-name} Instanz 
** Navigieren Sie zu den Operator-Details des {product-name} Operators 
** Öffnen Sie die {product-name} Registerkarte 
** Wählen Sie die neuvector-default Instanz aus 
** Öffnen Sie die Ressourcen-Registerkarte 
** Überprüfen Sie, ob die Ressourcen den Status Erstellt oder Ausgeführt haben

Nachdem Sie die {product-name} Plattform erfolgreich in Ihrem Cluster bereitgestellt haben, melden Sie sich bei der {product-name} Konsole unter `https://neuvector-route-webui-neuvector.(OC_INGRESS)` an. 
* Melden Sie sich mit dem ursprünglichen Benutzernamen admin und dem Passwort admin an. 
* Akzeptieren Sie die {product-name} Endbenutzer-Lizenzvereinbarung. 
* Ändern Sie das Passwort des Admin-Benutzers. Optional können Sie auch zusätzliche Benutzer im Menü Einstellungen -> Benutzer & Rollen erstellen. Jetzt sind Sie bereit, die {product-name} Konsole zu navigieren, um Schwachstellenscans zu starten, laufende Anwendungs-Pods zu beobachten und Sicherheitsmaßnahmen für Container anzuwenden.

*Aktualisierung {product-name}*

Aktualisieren Sie die {product-name} Version, indem Sie die Operator-Version aktualisieren, die mit der gewünschten {product-name} Version verknüpft ist.
======

.Bereitstellung mit Community-Operator
[%collapsible]
======
*Bereitstellung mit dem {product-name} Community-Operator aus dem Operator Hub*

*Technische Hinweise*

* {product-name} Container-Images werden vom Docker Hub aus dem {product-name} Konto abgerufen. 
* Die {product-name} Manager-Benutzeroberfläche wird typischerweise über eine OpenShift-Passthrough-Route auf einer Domain bereitgestellt. Zum Beispiel auf IBM Cloud neuvector-route-webui-neuvector.(cluster_name)-(random_hash)-0000.(region).containers.appdomain.cloud. Es kann auch als Dienst neuvector-service-webui über eine Node-Port-Adresse oder eine öffentliche IP bereitgestellt werden. 
* OpenShift Version 4.6+ 
* Es wird empfohlen, die {product-name} Installationskonfiguration zu überprüfen und zu ändern, indem Sie die YAML-Werte vor der Erstellung der {product-name} Instanz anpassen. Beispiele sind imagePullSecrets Name, Tag-Version, Ingress/Console-Zugriff, Multi-Cluster-Föderation, persistente Volumen PVC usw. Bitte beziehen Sie sich auf die Helm-Anweisungen unter https://github.com/neuvector/neuvector-helm für die Werte, die während der Installation geändert werden können.

. Erstellen Sie das Projekt neuvector
+
--
[,shell]
----
oc new-project neuvector
----
--
. Installieren Sie den {product-name} Community-Operator aus dem Operator Hub 
** Navigieren Sie in der OpenShift Console UI zu OperatorHub 
** Suchen Sie nach {product-name} Operator und wählen Sie die Auflistung mit dem Community-Abzeichen aus 
** Klicken Sie auf Installieren 
** Aktualisierungskanal konfigurieren. Der aktuelle neueste Kanal ist Beta, könnte aber in Zukunft auf Stabil verschoben werden. Wählen Sie stabil, wenn verfügbar. 
** Installationsmodus und installiertes Namensraum konfigurieren 
** Bestimmten Namensraum im Cluster auswählen 
** Neuvector als installiertes Namensraum auswählen 
** Genehmigungsstrategie konfigurieren 
** Installation bestätigen
. Laden Sie das Kubernetes-Geheimnis-Manifest herunter, das die Anmeldeinformationen zum Zugriff auf das {product-name} Container-Registry enthält. Speichern Sie die YAML-Manifestdatei unter ./neuvector-secret-registry.yaml.
. Wenden Sie das Kubernetes-Geheimnis-Manifest an, das die Anmeldeinformationen für das Registry enthält.
+
--
[,shell]
----
kubectl apply -n neuvector -f ./neuvector-secret-registry.yaml
----
--
. Bereiten Sie die YAML-Konfigurationswerte für die {product-name} Installation vor, beginnend mit dem folgenden YAML-Ausschnitt. Stellen Sie sicher, dass Sie die gewünschte {product-name} Version im 'tag'-Wert angeben. Überprüfen Sie das Referenzdokument der Werte im {product-name} Helm-Chart, um verfügbare Konfigurationsoptionen zu erhalten. Es gibt andere mögliche Helm-Werte, die im YAML konfiguriert werden können, wie z.B. ob Sie den Cluster so konfigurieren, dass er das Multi-Cluster-Management ermöglicht, indem Sie die Master- (Federated Master) oder Remote- (Federated Worker) Dienste exponieren.
+
--
[,yaml]
----
apiVersion: apm.neuvector.com/v1alpha1
kind: Neuvector
metadata:
  name: neuvector-default
  namespace: neuvector
spec:
  openshift: true
  tag: 4.3.0
  registry: docker.io
  exporter:
    image:
      repository: prometheus-exporter
      tag: 0.9.0
  manager:
    enabled: true
    env:
      ssl: true
    image:
      repository: manager
    svc:
      type: ClusterIP
      route:
        enabled: true
        termination: passthrough
  enforcer:
    enabled: true
    image:
      repository: enforcer
  cve:
    updater:
      enabled: true
      image:
        repository: updater
        tag: latest
      schedule: 0 0 * * *
    scanner:
      enabled: true
      replicas: 3
      image:
        repository: scanner
        tag: latest
  controller:
    enabled: true
    image:
      repository: controller
    replicas: 3
----
--
. Wenn der Operator installiert und einsatzbereit ist, kann eine {product-name} Instanz installiert werden. 
** Klicken Sie auf Operator anzeigen (nach der Operatorinstallation) oder wählen Sie den {product-name} Operator aus der Ansicht der installierten Operatoren aus 
** Klicken Sie auf Instanz erstellen 
** Wählen Sie Konfigurieren über YAML-Ansicht 
** Fügen Sie die vorbereiteten YAML-Konfigurationswerte ein 
** Klicken Sie auf Erstellen
. Überprüfen Sie die Installation der {product-name} Instanz. 
** Navigieren Sie zu den Operator-Details des {product-name} Operators 
** Öffnen Sie die {product-name} Registerkarte 
** Wählen Sie die neuvector-default Instanz aus 
** Öffnen Sie die Ressourcen-Registerkarte 
** Überprüfen Sie, ob die Ressourcen den Status Erstellt oder Ausgeführt haben
. Nachdem Sie die {product-name} Plattform erfolgreich in Ihrem Cluster bereitgestellt haben, melden Sie sich bei der {product-name} Konsole unter `https://neuvector-route-webui-neuvector.(INGRESS_DOMAIN)` an. 
** Melden Sie sich mit dem anfänglichen Benutzernamen admin und dem Passwort admin an. 
** Akzeptieren Sie die Endbenutzer-Lizenzvereinbarung für {product-name}. 
** Ändern Sie das Passwort des Admin-Benutzers. 
** Optional können Sie auch zusätzliche Benutzer im Menü Einstellungen -> Benutzer & Rollen erstellen.

Jetzt sind Sie bereit, die {product-name} Konsole zu navigieren, um Schwachstellenscans zu starten, laufende Anwendungs-Pods zu beobachten und Sicherheitsmaßnahmen für Container anzuwenden.

*Aktualisierung {product-name}*

. Von Operators > Installierte Operatoren > {product-name} Operator 
+
image:1_Installed.png[]
. Klicken Sie auf {product-name}, um Instanzen aufzulisten 
+
image:2_Instance.png[]
. Klicken Sie auf YAML, um Parameter zu bearbeiten 
+
image:3_YAML.png[]
. Aktualisieren Sie den Tag und klicken Sie auf Speichern 
+
image:4_tag_save.png[]
======

=== Fehlerbehebung

* Überprüfen Sie die Werte der Operator-Bereitstellung in der bereitgestellten YAML-Datei
* Überprüfen Sie, ob die Sicherheitskontextbeschränkung (SCC) für {product-name} in Schritt 2 erfolgreich hinzugefügt wurde
* Überprüfen und prüfen Sie die Werte des {product-name} Helm-Charts
* Stellen Sie sicher, dass der Registry-Pfad und der Versionstag korrekt eingestellt sind (Community-Operator; zertifiziert verwendet die Standardwerte)
* Stellen Sie sicher, dass der Pfad zum {product-name} Manager-Dienst neuvector-route-webui konfiguriert ist.
