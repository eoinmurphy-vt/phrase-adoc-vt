= Testmodi: Entdecken, Überwachen, Schützen
:revdate: 2024-09-27
:page-revdate: {revdate}
:page-opendocs-origin: /05.policy/02.modes/02.modes.md
:page-opendocs-slug:  /policy/modes

== Test \{product-name} Modi

Das \{product-name} Modul zur Erkennung von Verstößen hat drei Modi: Entdecken, Überwachen und Schützen. Zu jedem Zeitpunkt kann jede Gruppe (beginnend mit 'nv' oder der Gruppe 'Nodes') in einem dieser Modi sein. Der Modus kann über das Gruppenmenü, die Ansicht der Netzwerkaktivität oder das Dashboard gewechselt werden. Containergruppen können Prozess-/Dateiregeln in einem anderen Modus haben als Netzwerkregeln, wie xref:modes.adoc#_network_service_policy_mode[hier] beschrieben.

image:switchmodes.png[Modi]

[NOTE]
====
Benutzerdefinierte Gruppen haben keinen Schutzmodus. Das liegt daran, dass sie Container aus verschiedenen zugrunde liegenden Gruppen enthalten können, von denen jede in einem anderen Modus sein kann, was zu Verwirrung über das Verhalten führt.
====

=== Test Entdecken

Standardmäßig startet \{product-name} im Entdeckungsmodus. In diesem Modus: \{product-name}

* Entdeckt Ihre Containerinfrastruktur, einschließlich Container, Knoten und Hosts.
* Lernt Ihre Anwendungen und Verhaltensweisen, indem es Gespräche (Netzwerkverbindungen) zwischen Containern beobachtet.
* Identifiziert separate Dienste und Anwendungen, die ausgeführt werden.
* Erstellt automatisch eine Whitelist von Netzwerkregeln, um das normale Netzwerkverhalten von Anwendungen zu schützen.
* Baselines die Prozesse, die in Containern für jeden Dienst ausgeführt werden, und erstellt Whitelist-Profilregeln für Prozesse.

[NOTE]
====
Um zu bestimmen, wie lange ein Dienst im Entdeckungsmodus ausgeführt werden soll, führen Sie Testverkehr durch die Anwendung und überprüfen Sie alle Regeln auf Vollständigkeit. Mehrere Stunden sollten ausreichend sein, aber einige Anwendungen benötigen möglicherweise einige Tage, um vollständig getestet zu werden. Im Zweifelsfall wechseln Sie in den Überwachungsmodus und überprüfen Sie auf Verstöße, die dann in Whitelist-Regeln umgewandelt werden können, bevor Sie in den Schutzmodus wechseln.
====

=== Testüberwachung

Im Überwachungsmodus überwacht \{product-name} Gespräche und erkennt Laufzeitverstöße Ihrer Sicherheitsrichtlinie. In diesem Modus werden keine neuen Regeln von \{product-name} erstellt, aber Regeln können jederzeit manuell hinzugefügt werden.

Wenn Verstöße erkannt werden, sind sie im Netzwerkaktivitätsdiagramm visuell durch eine rote Linie sichtbar. Verstöße werden auch protokolliert und im Benachrichtigungs-Tab angezeigt. Verstöße gegen Prozessprofilregeln und Dateizugriffe werden in den Benachrichtigungen -> Sicherheitsereignisse protokolliert.

Im Netzwerkdiagramm können Sie auf jedes Gespräch (grüne, gelbe, rote Linie) klicken, um weitere Details über die Art der Verbindung und das zuletzt überwachte Protokoll anzuzeigen. Sie können auch die Schaltflächen Suchen und Filtern nach Gruppe in der unteren rechten Ecke verwenden, um die Anzeige Ihrer Container einzuschränken.

=== Testschutz

Im Schutzmodus blockieren die Durchsetzer von \{product-name} alle erkannten Netzwerkverstöße und Angriffe. Verstöße werden im Netzwerkdiagramm mit einem roten '`x`' angezeigt, was bedeutet, dass sie blockiert wurden. Unbefugte Prozesse und Dateizugriffe werden ebenfalls im Schutzmodus blockiert. DLP-Sensoren, die übereinstimmen, blockieren Netzwerkverbindungen.

== Testwechsel zwischen Modi

Sie können \{product-name} Gruppen einfach von einem Modus in einen anderen wechseln. Denken Sie daran, dass \{product-name} im Entdeckungsmodus eine Sicherheitsrichtlinie für erlaubtes, normales Containerverhalten erstellt. Sie können diese Regeln im Tab "Richtlinien -> Gruppen" oder im Detail im Menü "Richtlinien -> Netzwerkregeln" sehen.

Wenn Sie von Entdecken- zu Überwachungsmodus wechseln, wird \{product-name} alle Verstöße gegen das normale Verhalten, die nicht ausdrücklich erlaubt sind, kennzeichnen. Da \{product-name} Richtlinien basierend auf Anwendungen und Gruppen mit ähnlichen Attributen durchsetzt, ist es normalerweise nicht erforderlich, Regeln hinzuzufügen oder zu bearbeiten, wenn Container hoch- oder heruntergefahren werden.

Bitte stellen Sie sicher, dass Sie, bevor Sie neue Updates einführen, die zu neuen Arten von Verbindungen zwischen Containern führen, die betroffenen Dienste in den Entdeckungsmodus wechseln, um diese neuen Verhaltensweisen zu lernen. Alternativ können Sie neue Regeln manuell hinzufügen, während Sie sich in einem beliebigen Modus befinden, oder die CRD bearbeiten, die zur Erstellung der Regeln verwendet wird, um neue Verhaltensweisen hinzuzufügen.

=== Neuen Dienstmodus testen

Wenn neue Dienste von \{product-name} entdeckt werden, zum Beispiel wenn ein zuvor unbekannter Container zu laufen beginnt, kann er in einen Standardmodus gesetzt werden. Im Entdeckungsmodus beginnt \{product-name}, sein Verhalten zu lernen und Regeln zu erstellen. Im Überwachungsmodus wird ein Verstoß generiert, wenn Verbindungen zum neuen Dienst erkannt werden. Im Schutzmodus werden alle Verbindungen zum neuen Dienst blockiert, es sei denn, die Regeln wurden zuvor erstellt.

image:newservices.png[NewServiceMode]

=== Netzwerkdienstrichtlinienmodus testen

Es gibt eine globale Einstellung in den Einstellungen -> Konfiguration, um den Netzwerk-Schutzmodus separat für die Durchsetzung von Netzwerkregeln festzulegen. Wenn dies aktiviert ist (Standard ist deaktiviert), werden alle Netzwerkregeln im ausgewählten Schutzmodus (Entdecken, Überwachen, Schützen) sein, während Prozess-/Dateiregeln im Schutzmodus für diese Gruppe bleiben, wie im Bildschirm "Richtlinien -> Gruppen" angezeigt. Auf diese Weise können Netzwerkregeln auf Schützen (blockieren) gesetzt werden, während die Prozess-/Dateirichtlinie auf Überwachen gesetzt werden kann oder umgekehrt.

=== Automatisierte Förderung von Gruppenmodi testen

Fördert den Schutzmodus einer Gruppe basierend auf verstrichener Zeit und Kriterien. Diese Automatisierung gilt nicht für CRD erstellte Gruppen. Dieses Feature ermöglicht es einer neuen Anwendung, für einen bestimmten Zeitraum im Entdeckungsmodus zu laufen, das Verhalten zu lernen und \{product-name} erlaubt-listen Regeln für Netzwerk und Prozess zu erstellen, bevor sie automatisch in den Überwachungs- und dann in den Schutzmodus wechselt.

Das Kriterium für den Wechsel vom Entdeckungs- in den Überwachungsmodus ist: verstrichene Zeit zum Lernen aller Netzwerk- und Prozessaktivitäten von mindestens einem aktiven Pod in der Gruppe. Wenn dies beispielsweise auf 7 Tage eingestellt ist, wird der Modus 7 Tage nach der Erkennung eines laufenden Pods für die Gruppe automatisch auf Überwachen befördert.

Das Kriterium für den Wechsel vom Monitor- in den Schutzmodus ist: Es gibt keine Sicherheitsereignisse (Netzwerk, Prozess usw.) für den festgelegten Zeitraum der Gruppe. Wenn dies beispielsweise auf 14 Tage eingestellt ist, wird der Modus automatisch auf Schutz befördert, wenn 14 Tage lang keine Verstöße (Netzwerk, Prozess, Datei) ausgelöst werden (z. B. die Ruhezeit). Wenn keine laufenden Pods in der Gruppe vorhanden sind, erfolgt die Beförderung nicht.

image:policy_promotion.png[Förderung]

==== Testkonfliktlösung zwischen Diensten in verschiedenen Modi

Für Netzwerkverbindungen zwischen Containern in verschiedenen Dienstgruppen zeigt die folgende Tabelle, wie das System die Konflikte löst, wenn ihre Richtlinienmodi unterschiedlich sind.

|===
| Quelle | Ziel | Effektiver Modus

| Entdecken
| Überwachen
| Entdecken

| Entdecken
| Schützen
| Entdecken

| Überwachen
| Entdecken
| Entdecken

| Überwachen
| Schützen
| Überwachen

| Schützen
| Entdecken
| Entdecken

| Schützen
| Überwachen
| Überwachen
|===

Wie Sie sehen können, fällt der effektive Modus immer auf den am wenigsten restriktiven Richtlinienmodus zurück.

[NOTE]
====
Das oben Genannte gilt nur für Netzwerkregeln.
====
